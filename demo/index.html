<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
    		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	    	<meta name="apple-mobile-web-app-capable" content="yes">

		<title>デモページ</title>

		<script src="//cdn.8thwall.com/web/aframe/8frame-0.9.0.min.js"></script>
	    	<script src="https://cdn.8thwall.com/web/xrextras/xrextras.js"></script>

	        <script defer src="//cdn.8thwall.com/web/aframe/aframe-animation-component-5.1.2.min.js"></script>
	        <script src="//cdn.8thwall.com/web/aframe/aframe-extras-4.2.0.min.js"></script>

		<!-- 8th Wall API key -->
		<script async src="//apps.8thwall.com/xrweb?appKey=bnWBr8smMOtm8hsLzv1M3AsjyZEPcHize0Tqflu9nYQxqu0yf0fp8mul8iPtRtqb0oR3LW"></script>

		<script>
			AFRAME.registerComponent('target-tower', {
			    schema: {
			        name: { type: 'string' }
			    },
			    init: function() {
				    console.log("load")
				    const showImage = ({detail}) => {
					    document.querySelector('#box').emit('hoge');

					    document.querySelector('#target_Tower').emit('markerfound');
					    document.querySelector('#tower_2').emit('markerfound');
					    document.querySelector('#tower_2_1').emit('markerfound');
					    document.querySelector('#tower_3').emit('markerfound');
					    document.querySelector('#tower_4').emit('markerfound');
					    document.querySelector('#tower_5').emit('markerfound');

					    document.querySelector('#tower_8').visible = true;
				    }
				    const hideImage = ({detail}) => {

					    document.querySelector('#target_Tower').emit('lostfound');
					    document.querySelector('#tower_2').emit('lostfound');
					    document.querySelector('#tower_2_1').emit('lostfound');
					    document.querySelector('#tower_3').emit('lostfound');
					    document.querySelector('#tower_4').emit('lostfound');
					    document.querySelector('#tower_5').emit('lostfound');

					    document.querySelector('#tower_8').visible = false;
				    }
				    this.el.sceneEl.addEventListener('xrimagefound', showImage)
				    this.el.sceneEl.addEventListener('xrimagelost', hideImage)
				    this.el.sceneEl.addEventListener('xrimageloading', hideImage)
				    console.log("fin")
			    }
			})
		</script>
	</head>
	<body>
		<a-scene
		      xrweb="disableWorldTracking: true"
		      xrextras-almost-there
		      xrextras-runtime-error
		      xrextras-loading >
			<a-assets>
				<a-asset-item id="tower1" src="model/H1c.glb"></a-asset-item>
				<a-asset-item id="tower2" src="model/H2.glb"></a-asset-item>
				<a-asset-item id="tower2_1" src="model/H2a.glb"></a-asset-item>
				<a-asset-item id="tower3" src="model/H3.glb"></a-asset-item>
				<a-asset-item id="tower4" src="model/H4.glb"></a-asset-item>
				<a-asset-item id="tower5" src="model/H5.glb"></a-asset-item>
				<a-asset-item id="tower6" src="model/H6.glb"></a-asset-item>
				<a-asset-item id="tower7" src="model/H7.glb"></a-asset-item>
				<a-asset-item id="tower8" src="model/H8.glb"></a-asset-item>
				<!--
				<a-asset-item id="tower9" src="model/H9.glb"></a-asset-item>
				<a-asset-item id="tower10" src="model/H10.glb"></a-asset-item>
				<a-asset-item id="tower11" src="model/H11.glb"></a-asset-item>
				<a-asset-item id="tower12" src="model/H13.glb"></a-asset-item>
				<a-asset-item id="tower13" src="model/H14.glb"></a-asset-item>
				<a-asset-item id="tower14" src="model/H15.glb"></a-asset-item>
				<a-asset-item id="tower15" src="model/H16.glb"></a-asset-item>
				<a-asset-item id="tower16" src="model/H17.glb"></a-asset-item>
				<a-asset-item id="tower17" src="model/H18.glb"></a-asset-item>
				<a-asset-item id="tower18" src="model/H19.glb"></a-asset-item>
				<a-asset-item id="tower19" src="model/H20.glb"></a-asset-item>
				<a-asset-item id="tower20" src="model/H21.glb"></a-asset-item>
				<a-asset-item id="tower21" src="model/H22.glb"></a-asset-item>
				<a-asset-item id="tower22" src="model/H23.glb"></a-asset-item>
				<a-asset-item id="tower23" src="model/H24.glb"></a-asset-item>
				<a-asset-item id="tower24" src="model/H25.glb"></a-asset-item>
				<a-asset-item id="tower25" src="model/H26.glb"></a-asset-item>
				<a-asset-item id="tower26" src="model/H27.glb"></a-asset-item>
				<a-asset-item id="tower27" src="model/H28.glb"></a-asset-item>
				-->
				<a-asset-item id="tower28" src="model/H29.glb"></a-asset-item>
				<a-asset-item id="tower29" src="model/Building.glb"></a-asset-item>
			</a-assets>

			<a-camera
				position="0 4 10"
			        raycaster="objects: .cantap"
				cursor="fuse: false; rayOrigin: mouse;">
			</a-camera>

			<a-light type="directional" intensity="0.5"
			       animation="property: position; from: -5 -5 5; to: 5 5 5; dur: 2000; easing: linear; dir: alternate; loop: true">
      			</a-light>

      			<a-light type="ambient" intensity="1"></a-light>

			<a-box position="0 1.6 0" id="box"
                               animation="property: position; to: 5 1.6 0; dur: 1500; easing: linear; begin: hoge;">
			</a-box>

      			<a-entity target-tower xrextras-named-image-target="name: targetTower" id="target_Tower">
			    <a-gltf-model src="#tower1"
		  	    	      xrextras-one-finger-rotate
				     scale="0.01 0.01 0.01">
			    </a-gltf-model>
			    <a-gltf-model src="#tower2"
		                      id="tower_2"
		  	    	      xrextras-one-finger-rotate
			              scale="0.01 0.01 0.01"
 		                      animation="property: visible; to: true; delay: 500; begin: markerfound;"
				      animation__2="property: visible; to: false; begin: lostfound;">
			    </a-gltf-model>
			    <a-gltf-model src="#tower2_1"
		                      id="tower_2_1"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
 		                      animation="property: visible; to: true; delay: 1000; begin: markerfound;"
				      animation__2="property: visible; to: false; begin: lostfound;">
			    </a-gltf-model>
			    <a-gltf-model src="#tower3"
		                      id="tower_3"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
					  visible="false"
 		                      animation="property: visible; to: true; delay: 1500; begin: markerfound;"
				      animation__2="property: visible; to: false; begin: lostfound;">
			    </a-gltf-model>
			    <a-gltf-model src="#tower4"
		                      id="tower_4"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
	  visible="false">
				    <a-animation attribute="visible" to="true" delay="2000" begin="markerfound"></a-animation>
				    <a-animation attribute="visible" to="false" begin="lostfound"></a-animation>
			    </a-gltf-model>
			    <a-gltf-model src="#tower5"
		                      id="tower_5"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
	  visible="false">
				    <a-animation attribute="visible" to="true" delay="2500" begin="markerfound"></a-animation>
				    <a-animation attribute="visible" to="false" begin="lostfound"></a-animation>
			    </a-gltf-model>
			    <a-gltf-model src="#tower6"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
	  visible="false">
				    <a-animation attribute="visible" to="true" delay="3000" begin="markerfound"></a-animation>
				    <a-animation attribute="visible" to="false" begin="lostfound"></a-animation>
			    </a-gltf-model>
			    <a-gltf-model src="#tower7"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
	  visible="false">
				    <a-animation attribute="visible" to="true" delay="3500" begin="markerfound"></a-animation>
				    <a-animation attribute="visible" to="false" begin="lostfound"></a-animation>
			    </a-gltf-model>
			    <a-gltf-model src="#tower8"
		     			id="tower_8"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
	  visible="false">
				    <a-animation attribute="visible" to="true" delay="500" ></a-animation>
				    <a-animation attribute="visible" to="true" delay="3500" begin="markerfound"></a-animation>
				    <a-animation attribute="visible" to="false" begin="lostfound"></a-animation>
			    </a-gltf-model>
			    <!--
			    <a-gltf-model src="#tower9"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
	  visible="false">
				    <a-animation attribute="visible" to="true" delay="4000" begin="markerfound"></a-animation>
			    </a-gltf-model>
			    <a-gltf-model src="#tower10"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
			     	      visible="false"
                                          animation="property: visible; to: true; delay: 5000">
			    </a-gltf-model>
			    <a-gltf-model src="#tower11"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
			     	      visible="false"
                                          animation="property: visible; to: true; delay: 5500">
			    </a-gltf-model>
			    <a-gltf-model src="#tower12"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
			     	      visible="false"
                                          animation="property: visible; to: true; delay: 6000">
			    </a-gltf-model>
			    <a-gltf-model src="#tower13"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
			     	      visible="false"
                                          animation="property: visible; to: true; delay: 6500">
			    </a-gltf-model>
			    <a-gltf-model src="#tower14"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
			     	      visible="false"
                                          animation="property: visible; to: true; delay: 7000">
			    </a-gltf-model>
			    <a-gltf-model src="#tower15"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
			     	      visible="false"
                                          animation="property: visible; to: true; delay: 7500">
			    </a-gltf-model>
			    <a-gltf-model src="#tower16"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
			     	      visible="false"
                                          animation="property: visible; to: true; delay: 8000">
			    </a-gltf-model>
			    <a-gltf-model src="#tower17"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
			     	      visible="false"
                                          animation="property: visible; to: true; delay: 8500">
			    </a-gltf-model>
			    <a-gltf-model src="#tower18"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
			     	      visible="false"
                                          animation="property: visible; to: true; delay: 9000">
			    </a-gltf-model>
			    <a-gltf-model src="#tower19"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
			     	      visible="false"
                                          animation="property: visible; to: true; delay: 9500">
			    </a-gltf-model>
			    <a-gltf-model src="#tower20"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
			     	      visible="false"
                                          animation="property: visible; to: true; delay: 10000">
			    </a-gltf-model>
			    <a-gltf-model src="#tower21"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
			     	      visible="false"
                                          animation="property: visible; to: true; delay: 10500">
			    </a-gltf-model>
			    <a-gltf-model src="#tower22"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
			     	      visible="false"
                                          animation="property: visible; to: true; delay: 11000">
			    </a-gltf-model>
			    <a-gltf-model src="#tower23"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
			     	      visible="false"
                                          animation="property: visible; to: true; delay: 11500">
			    </a-gltf-model>
			    <a-gltf-model src="#tower24"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
			     	      visible="false"
                                          animation="property: visible; to: true; delay: 12000">
			    </a-gltf-model>
			    <a-gltf-model src="#tower25"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
			     	      visible="false"
                                          animation="property: visible; to: true; delay: 12500">
			    </a-gltf-model>
			    <a-gltf-model src="#tower26"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
			     	      visible="false"
                                          animation="property: visible; to: true; delay: 13000">
			    </a-gltf-model>
			    <a-gltf-model src="#tower27"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
			     	      visible="false"
                                          animation="property: visible; to: true; delay: 13500">
			    </a-gltf-model>
			    <a-gltf-model src="#tower28"
		  	    	      xrextras-one-finger-rotate
		     			scale="0.01 0.01 0.01"	
				        visible="false"
                                          animation="property: visible; to: true; delay: 14000">
			    </a-gltf-model>
			    -->
			    <a-gltf-model src="#tower29"
		  	    	      xrextras-one-finger-rotate
		                      scale="0.01 0.01 0.01">
			    </a-gltf-model>
			</a-entity>
		</a-scene>
	</body>
</html>
