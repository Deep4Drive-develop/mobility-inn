<html>
  <head>
    <title>XRExtras: Camera Pipeline</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

    <!-- XR Extras - provides utilities like load screen, almost there, and error handling.
         See https://github.com/8thwall/web/tree/master/xrextras/ -->
    <script src="//cdn.8thwall.com/web/xrextras/xrextras.js"></script>

    <!-- 8thWall Web - Replace the app key here with your own app key -->
    <script async src="//apps.8thwall.com/xrweb?appKey=bnWBr8smMOtm8hsLzv1M3AsjyZEPcHize0Tqflu9nYQxqu0yf0fp8mul8iPtRtqb0oR3LW"></script>

    <script src="index.js"></script>
    
    <script>
        const onxrloaded = () => {
            XR.addCameraPipelineModules([  // Add camera pipeline modules.
                // Existing pipeline modules.
                XR.GlTextureRenderer.pipelineModule(),       // Draws the camera feed.
                XRExtras.AlmostThere.pipelineModule(),       // Detects unsupported browsers and gives hints.
                XRExtras.FullWindowCanvas.pipelineModule(),  // Modifies the canvas to fill the window.
                XRExtras.Loading.pipelineModule(),           // Manages the loading screen on startup.
                XRExtras.RuntimeError.pipelineModule(),      // Shows an error image on runtime error.
            ])
            
            XR.run({canvas: document.getElementById('camerafeed')})   // Request permissions and run camera.
            }
            
            // Show loading screen before the full XR library has been loaded.
            const load = () => { XRExtras.Loading.showLoading({onxrloaded}) }
            window.onload = () => { window.XRExtras ? load() : window.addEventListener('xrextrasloaded', load) }
    </script>
  </head>
  <body>
    <canvas id="camerafeed">hello</canvas>
    
  </body>
</html>