<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
    		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	    	<meta name="apple-mobile-web-app-capable" content="yes">

		<title>デモページ(miura)</title>

		<script src="//cdn.8thwall.com/web/aframe/8frame-0.9.0.min.js"></script>
	    	<script src="https://cdn.8thwall.com/web/xrextras/xrextras.js"></script>

	        <script defer src="//cdn.8thwall.com/web/aframe/aframe-animation-component-5.1.2.min.js"></script>
	        <script src="//cdn.8thwall.com/web/aframe/aframe-extras-4.2.0.min.js"></script>

		<!-- 8th Wall API key -->
		<script async src="//apps.8thwall.com/xrweb?appKey=bnWBr8smMOtm8hsLzv1M3AsjyZEPcHize0Tqflu9nYQxqu0yf0fp8mul8iPtRtqb0oR3LW"></script>

		<script>
			AFRAME.registerComponent('target-tower', {
			    schema: {
			        name: { type: 'string' }
			    },
			    init: function() {
				    const showImage = ({detail}) => {
					    document.querySelector('#mall').setAttribute(  "visible", "false")
					    document.querySelector('#mall_h13').setAttribute(  "visible", "false")
					    document.querySelector('#h13_top').setAttribute(  "visible", "false")
					    for(var i = 1; i <= 33; i++) {
					        document.querySelector('#tower_' + String(i)).setAttribute(  "visible", "false")
				            }

					    document.querySelector('#tower_1').setAttribute(  "animation", "property: visible; to: true; delay:   250;")
					    document.querySelector('#tower_2').setAttribute(  "animation", "property: visible; to: true; delay:   500;")
					    document.querySelector('#tower_3').setAttribute(  "animation", "property: visible; to: true; delay:   750;")
					    document.querySelector('#tower_4').setAttribute(  "animation", "property: visible; to: true; delay:  1000;")
					    document.querySelector('#tower_5').setAttribute(  "animation", "property: visible; to: true; delay:  1250;")
					    document.querySelector('#mall').setAttribute(     "animation", "property: visible; to: true; delay:  1250;")
					    document.querySelector('#tower_6').setAttribute(  "animation", "property: visible; to: true; delay:  1500;")
					    document.querySelector('#tower_7').setAttribute(  "animation", "property: visible; to: true; delay:  1750;")
					    document.querySelector('#tower_8').setAttribute(  "animation", "property: visible; to: true; delay:  2000;")
					    document.querySelector('#tower_9').setAttribute(  "animation", "property: visible; to: true; delay:  2250;")
					    document.querySelector('#tower_10').setAttribute( "animation", "property: visible; to: true; delay:  2500;")
					    document.querySelector('#tower_11').setAttribute( "animation", "property: visible; to: true; delay:  2750;")
					    document.querySelector('#tower_12').setAttribute( "animation", "property: visible; to: true; delay:  3000;")
					    document.querySelector('#tower_13').setAttribute( "animation", "property: visible; to: true; delay:  3250;")
					    document.querySelector('#tower_14').setAttribute( "animation", "property: visible; to: true; delay:  3500;")
					    document.querySelector('#tower_15').setAttribute( "animation", "property: visible; to: true; delay:  3750;")
					    document.querySelector('#tower_16').setAttribute( "animation", "property: visible; to: true; delay:  4000;")
					    document.querySelector('#mall_h13').setAttribute( "animation", "property: visible; to: true; delay:  4000;")
					    document.querySelector('#tower_17').setAttribute( "animation", "property: visible; to: true; delay:  4250;")
					    document.querySelector('#tower_18').setAttribute( "animation", "property: visible; to: true; delay:  4500;")
					    document.querySelector('#tower_19').setAttribute( "animation", "property: visible; to: true; delay:  4750;")
					    document.querySelector('#tower_20').setAttribute( "animation", "property: visible; to: true; delay:  5000;")
					    document.querySelector('#tower_21').setAttribute( "animation", "property: visible; to: true; delay:  5250;")
					    document.querySelector('#tower_22').setAttribute( "animation", "property: visible; to: true; delay:  5500;")
					    document.querySelector('#tower_23').setAttribute( "animation", "property: visible; to: true; delay:  5750;")
					    document.querySelector('#tower_24').setAttribute( "animation", "property: visible; to: true; delay:  6000;")
					    document.querySelector('#tower_25').setAttribute( "animation", "property: visible; to: true; delay:  6250;")
					    document.querySelector('#tower_26').setAttribute( "animation", "property: visible; to: true; delay:  6500;")
					    document.querySelector('#tower_27').setAttribute( "animation", "property: visible; to: true; delay:  6750;")
					    document.querySelector('#tower_28').setAttribute( "animation", "property: visible; to: true; delay:  7000;")
					    document.querySelector('#tower_29').setAttribute( "animation", "property: visible; to: true; delay:  7250;")
					    document.querySelector('#h13_top').setAttribute(  "animation", "property: visible; to: true; delay:  7250;")
					    document.querySelector('#tower_30').setAttribute( "animation", "property: visible; to: true; delay:  7500;")
					    document.querySelector('#tower_31').setAttribute( "animation", "property: visible; to: true; delay:  7750;")
					    document.querySelector('#tower_32').setAttribute( "animation", "property: visible; to: true; delay:  8000;")
					    document.querySelector('#tower_33').setAttribute( "animation", "property: visible; to: true; delay:  8250;")
				    }
				    const hideImage = ({detail}) => {
					    document.querySelector('#mall').removeAttribute("animation")
					    document.querySelector('#mall_h13').removeAttribute("animation")
					    document.querySelector('#h13_top').removeAttribute("animation")
					    for(var i = 1; i <= 33; i++) {
					        document.querySelector('#tower_' + String(i)).removeAttribute("animation")
				            }
				    }
				    this.el.sceneEl.addEventListener('xrimagefound', showImage)
				    this.el.sceneEl.addEventListener('xrimagelost', hideImage)
				    this.el.sceneEl.addEventListener('xrimagescanning', hideImage)
			    }
			})
		</script>
	</head>
	<body>
		<a-scene
		      xrweb="disableWorldTracking: true"
		      xrextras-almost-there
		      xrextras-runtime-error
		      xrextras-loading >
			<a-assets>
				<a-asset-item id="ground" src="model/ground.glb"></a-asset-item>
				<a-asset-item id="mall" src="model/mall.glb"></a-asset-item>
				<a-asset-item id="mall_h13" src="model/mall_h13.glb"></a-asset-item>
				<a-asset-item id="h13_top" src="model/h13_top.glb"></a-asset-item>
				<a-asset-item id="tower1" src="model/01.glb"></a-asset-item>
				<a-asset-item id="tower2" src="model/02.glb"></a-asset-item>
				<a-asset-item id="tower3" src="model/03.glb"></a-asset-item>
				<a-asset-item id="tower4" src="model/04.glb"></a-asset-item>
				<a-asset-item id="tower5" src="model/05.glb"></a-asset-item>
				<a-asset-item id="tower6" src="model/06.glb"></a-asset-item>
				<a-asset-item id="tower7" src="model/07.glb"></a-asset-item>
				<a-asset-item id="tower8" src="model/08.glb"></a-asset-item>
				<a-asset-item id="tower9" src="model/09.glb"></a-asset-item>
				<a-asset-item id="tower10" src="model/10.glb"></a-asset-item>
				<a-asset-item id="tower11" src="model/11.glb"></a-asset-item>
				<a-asset-item id="tower12" src="model/12.glb"></a-asset-item>
				<a-asset-item id="tower13" src="model/13.glb"></a-asset-item>
				<a-asset-item id="tower14" src="model/14.glb"></a-asset-item>
				<a-asset-item id="tower15" src="model/15.glb"></a-asset-item>
				<a-asset-item id="tower16" src="model/16.glb"></a-asset-item>
				<a-asset-item id="tower17" src="model/17.glb"></a-asset-item>
				<a-asset-item id="tower18" src="model/18.glb"></a-asset-item>
				<a-asset-item id="tower19" src="model/19.glb"></a-asset-item>
				<a-asset-item id="tower20" src="model/20.glb"></a-asset-item>
				<a-asset-item id="tower21" src="model/21.glb"></a-asset-item>
				<a-asset-item id="tower22" src="model/22.glb"></a-asset-item>
				<a-asset-item id="tower23" src="model/23.glb"></a-asset-item>
				<a-asset-item id="tower24" src="model/24.glb"></a-asset-item>
				<a-asset-item id="tower25" src="model/25.glb"></a-asset-item>
				<a-asset-item id="tower26" src="model/26.glb"></a-asset-item>
				<a-asset-item id="tower27" src="model/27.glb"></a-asset-item>
				<a-asset-item id="tower28" src="model/28.glb"></a-asset-item>
				<a-asset-item id="tower29" src="model/29.glb"></a-asset-item>
				<a-asset-item id="tower30" src="model/30.glb"></a-asset-item>
				<a-asset-item id="tower31" src="model/31.glb"></a-asset-item>
				<a-asset-item id="tower32" src="model/32.glb"></a-asset-item>
				<a-asset-item id="tower33" src="model/33.glb"></a-asset-item>
			</a-assets>

			<a-camera
				position="0 4 10"
			        raycaster="objects: .cantap"
				cursor="fuse: false; rayOrigin: mouse;">
			</a-camera>

			<a-light type="directional" intensity="0.5"
			       animation="property: position; from: -5 -5 5; to: 5 5 5; dur: 2000; easing: linear; dir: alternate; loop: true">
      			</a-light>

      			<a-light type="ambient" intensity="1"></a-light>

      			<a-entity target-tower xrextras-named-image-target="name: targetTower" id="target_Tower">
			    <a-gltf-model src="#ground"
		                      id="ground"
		  	    	      xrextras-one-finger-rotate
			scale="0.0125 0.0125 0.0125">
			    </a-gltf-model>
			    <a-gltf-model src="#mall"
		                      id="mall"
		  	    	      xrextras-one-finger-rotate
		                      scale="0.0125 0.0125 0.0125">
			    </a-gltf-model>
			    <a-gltf-model src="#mall_h13"
		                      id="mall_h13"
		  	    	      xrextras-one-finger-rotate
		                      scale="0.0125 0.0125 0.0125">
			    </a-gltf-model>
			    <a-gltf-model src="#h13_top"
		                      id="h13_top"
		  	    	      xrextras-one-finger-rotate
		                      scale="0.0125 0.0125 0.0125">
			    </a-gltf-model>
			    <a-gltf-model src="#tower1"
		                      id="tower_1"
		  	    	      xrextras-one-finger-rotate
			scale="0.0125 0.0125 0.0125">
			    </a-gltf-model>
			    <a-gltf-model src="#tower2"
		                      id="tower_2"
		  	    	      xrextras-one-finger-rotate
			scale="0.0125 0.0125 0.0125">
			    <a-gltf-model src="#tower3"
		                      id="tower_3"
		  	    	      xrextras-one-finger-rotate
			scale="0.0125 0.0125 0.0125">
			    </a-gltf-model>
			    <a-gltf-model src="#tower4"
		                      id="tower_4"
		  	    	      xrextras-one-finger-rotate
			scale="0.0125 0.0125 0.0125">
			    </a-gltf-model>
			    <a-gltf-model src="#tower5"
		                      id="tower_5"
		  	    	      xrextras-one-finger-rotate
			scale="0.0125 0.0125 0.0125"	>
			    </a-gltf-model>
			    <a-gltf-model src="#tower6"
		                      id="tower_6"
		  	    	      xrextras-one-finger-rotate
		     scale="0.0125 0.0125 0.0125"	>
			    </a-gltf-model>
			    <a-gltf-model src="#tower7"
		                      id="tower_7"
		  	    	      xrextras-one-finger-rotate
		     scale="0.0125 0.0125 0.0125"	>
			    </a-gltf-model>
			    <a-gltf-model src="#tower8"
		     			id="tower_8"
		  	    	      xrextras-one-finger-rotate
	  scale="0.0125 0.0125 0.0125"	>
			    </a-gltf-model>
			    <a-gltf-model src="#tower9"
		                      id="tower_9"
		  	    	      xrextras-one-finger-rotate
		     scale="0.0125 0.0125 0.0125"	>
			    </a-gltf-model>
			    <a-gltf-model src="#tower10"
		                      id="tower_10"
		  	    	      xrextras-one-finger-rotate
		     scale="0.0125 0.0125 0.0125"	>
			    </a-gltf-model>
			    <a-gltf-model src="#tower11"
		                      id="tower_11"
		  	    	      xrextras-one-finger-rotate
		     scale="0.0125 0.0125 0.0125"	>
			    </a-gltf-model>
			    <a-gltf-model src="#tower12"
		                      id="tower_12"
		  	    	      xrextras-one-finger-rotate
		     scale="0.0125 0.0125 0.0125"	>
			    </a-gltf-model>
			    <a-gltf-model src="#tower13"
		                      id="tower_13"
		  	    	      xrextras-one-finger-rotate
		     scale="0.0125 0.0125 0.0125"	>
			    </a-gltf-model>
			    <a-gltf-model src="#tower14"
		                      id="tower_14"
		  	    	      xrextras-one-finger-rotate
		     scale="0.0125 0.0125 0.0125"	>
			    </a-gltf-model>
			    <a-gltf-model src="#tower15"
		                      id="tower_15"
		  	    	      xrextras-one-finger-rotate
		     scale="0.0125 0.0125 0.0125"	>
			    </a-gltf-model>
			    <a-gltf-model src="#tower16"
		                      id="tower_16"
		  	    	      xrextras-one-finger-rotate
		     scale="0.0125 0.0125 0.0125"	>
			    </a-gltf-model>
			    <a-gltf-model src="#tower17"
		                      id="tower_17"
		  	    	      xrextras-one-finger-rotate
		     scale="0.0125 0.0125 0.0125"	>
			    </a-gltf-model>
			    <a-gltf-model src="#tower18"
		                      id="tower_18"
		  	    	      xrextras-one-finger-rotate
		     scale="0.0125 0.0125 0.0125"	>
			    </a-gltf-model>
			    <a-gltf-model src="#tower19"
		                      id="tower_19"
		  	    	      xrextras-one-finger-rotate
		     scale="0.0125 0.0125 0.0125"	>
			    </a-gltf-model>
			    <a-gltf-model src="#tower20"
		                      id="tower_20"
		  	    	      xrextras-one-finger-rotate
		     scale="0.0125 0.0125 0.0125"	>
			    </a-gltf-model>
			    <a-gltf-model src="#tower21"
		                      id="tower_21"
		  	    	      xrextras-one-finger-rotate
		     scale="0.0125 0.0125 0.0125"	>
			    </a-gltf-model>
			    <a-gltf-model src="#tower22"
		                      id="tower_22"
		  	    	      xrextras-one-finger-rotate
		     scale="0.0125 0.0125 0.0125"	>
			    </a-gltf-model>
			    <a-gltf-model src="#tower23"
		                      id="tower_23"
		  	    	      xrextras-one-finger-rotate
		     scale="0.0125 0.0125 0.0125"	>
			    </a-gltf-model>
			    <a-gltf-model src="#tower24"
		                      id="tower_24"
		  	    	      xrextras-one-finger-rotate
		     scale="0.0125 0.0125 0.0125"	>
			    </a-gltf-model>
			    <a-gltf-model src="#tower25"
		                      id="tower_25"
		  	    	      xrextras-one-finger-rotate
		     scale="0.0125 0.0125 0.0125"	>
			    </a-gltf-model>
			    <a-gltf-model src="#tower26"
		                      id="tower_26"
		  	    	      xrextras-one-finger-rotate
		     scale="0.0125 0.0125 0.0125"	>
			    </a-gltf-model>
			    <a-gltf-model src="#tower27"
		                      id="tower_27"
		  	    	      xrextras-one-finger-rotate
		     scale="0.0125 0.0125 0.0125"	>
			    </a-gltf-model>
			    <a-gltf-model src="#tower28"
		                      id="tower_28"
		  	    	      xrextras-one-finger-rotate
		     scale="0.0125 0.0125 0.0125"	>
			    </a-gltf-model>
			    <a-gltf-model src="#tower29"
		                      id="tower_29"
		  	    	      xrextras-one-finger-rotate
		                      scale="0.0125 0.0125 0.0125">
			    </a-gltf-model>
			    <a-gltf-model src="#tower30"
		                      id="tower_30"
		  	    	      xrextras-one-finger-rotate
		                      scale="0.0125 0.0125 0.0125">
			    </a-gltf-model>
			    <a-gltf-model src="#tower31"
		                      id="tower_31"
		  	    	      xrextras-one-finger-rotate
		                      scale="0.0125 0.0125 0.0125">
			    </a-gltf-model>
			    <a-gltf-model src="#tower32"
		                      id="tower_32"
		  	    	      xrextras-one-finger-rotate
		                      scale="0.0125 0.0125 0.0125">
			    </a-gltf-model>
			    <a-gltf-model src="#tower33"
		                      id="tower_33"
		  	    	      xrextras-one-finger-rotate
		                      scale="0.0125 0.0125 0.0125">
			    </a-gltf-model>
			</a-entity>
		</a-scene>
	</body>
</html>
